{"mappings":"YAAA,IAAMA,EAAS,CAAC,aAAc,UAAW,SAAU,SAAU,cAEvDC,EAAO,CACXC,QAASC,SAASC,cAAc,gBAChCC,OAAQF,SAASC,cAAc,WAC/BE,SAAUH,SAASC,cAAc,aACjCG,YAAaJ,SAASC,cAAc,8BAmBtC,SAASI,EAAkBC,GACzBR,EAAKI,OAAOK,YAAcD,C,CAG5B,SAASE,EAAoBF,GAC3BR,EAAKK,SAASI,YAAcD,C,CArB9BR,EAAKC,QAAQU,iBAAiB,SAAS,WACrC,IAAMC,EAAWb,EAAOc,KAAI,SAAAC,G,OA6B9B,SAAaA,GACX,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAQkBC,EAAKC,EARjBC,GAQYF,EARQ,IAQHC,EARS,KAS3BE,KAAKC,MAAMD,KAAKE,UAAYJ,EAAMD,EAAM,GAAKA,IAPlDM,YAAW,WACTR,EAAQ,CAAEF,QAAOM,Q,GAChBA,E,IAnCgCK,CAAIX,E,IACzCP,IACAG,EAAqB,uCAEkCK,QAA/CW,KAAKd,GAAUe,MAAK,SAAAC,G,IAAGd,EAAKc,EAALd,MAAOM,EAAIQ,EAAJR,KACpCb,EAAkB,WAAyCsB,OAAvBf,EAAM,mBAAiCe,OAALT,EAAK,UAkB/E,SAA4BQ,G,IAAEd,EAAFc,EAAEd,MAAOM,EAATQ,EAASR,KAC7BU,EAAK,qBAAsCD,OAAjBf,EAAM,aAAgBe,OAALT,EAAK,cAEtDpB,EAAKM,YAAYyB,UAAU,YAAaD,E,CApBhBE,CAAH,CAAElB,QAAOM,Q,IAIIL,QAA1BkB,IAAIrB,GAAUe,MAAK,SAAAO,GACzBxB,EAAqB,mC","sources":["src/js/08-racetrack.js"],"sourcesContent":["const horses = ['Secretarit', 'Eclipse', 'Bullet', 'Rocket', 'Flying Fox'];\n\nconst refs = {\n  raceBtn: document.querySelector('.js-race-btn'),\n  winner: document.querySelector('.winner'),\n  progress: document.querySelector('.progress'),\n  resultTable: document.querySelector('.js-results-table > tbody'),\n};\n\nrefs.raceBtn.addEventListener('click', () => {\n  const promises = horses.map(horse => run(horse));\n  updateWinnerField();\n  updateProgressField(`Заїзд почався ставки не приймаються`);\n  //Promise.race();  цей метод промісу повертає проміс який виконався швидше за інших\n  Promise.race(promises).then(({ horse, time }) => {\n    updateWinnerField(`Переміг ${horse}, фінішував за ${time} часу`);\n    updateResultsTable({ horse, time });\n  });\n\n  //Promise.all() повертає масив всіх виконаних промісів\n  Promise.all(promises).then(x => {\n    updateProgressField(`Заїзд закінчен, приймаємо ставки`);\n  });\n});\n\nfunction updateWinnerField(message) {\n  refs.winner.textContent = message;\n}\n\nfunction updateProgressField(message) {\n  refs.progress.textContent = message;\n}\n\nfunction updateResultsTable({ horse, time }) {\n  const tr = `<tr><td>0</td><td>${horse}</td><td>${time}</td></tr>`;\n\n  refs.resultTable.innerHTML('beforeend', tr);\n}\n\nfunction run(horse) {\n  return new Promise((resolve, reject) => {\n    const time = getRanomTime(2000, 3500);\n\n    setTimeout(() => {\n      resolve({ horse, time });\n    }, time);\n  });\n}\n\nfunction getRanomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n"],"names":["$181146251e264a74$var$horses","$181146251e264a74$var$refs","raceBtn","document","querySelector","winner","progress","resultTable","$181146251e264a74$var$updateWinnerField","message","textContent","$181146251e264a74$var$updateProgressField","addEventListener","promises","map","horse","Promise","resolve","reject","min","max","time","Math","floor","random","setTimeout","$181146251e264a74$var$run","race","then","param","concat","tr","innerHTML","$181146251e264a74$var$updateResultsTable","all","x"],"version":3,"file":"08-racetrack.8ad5fe45.js.map"}